<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Matching Pair Game</title>
        <style>
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                font-family: "Arial", sans-serif;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                min-height: 100vh;
                display: flex;
                flex-direction: column;
                align-items: center;
                padding: 20px;
            }

            .game-container {
                background: white;
                border-radius: 15px;
                padding: 30px;
                box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
                max-width: 600px;
                width: 100%;
            }

            h1 {
                text-align: center;
                color: #333;
                margin-bottom: 30px;
                font-size: 2.5em;
                text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
            }

            .controls {
                display: flex;
                justify-content: center;
                align-items: center;
                gap: 20px;
                margin-bottom: 30px;
                flex-wrap: wrap;
            }

            .size-selector {
                display: flex;
                align-items: center;
                gap: 10px;
            }

            .size-selector label {
                font-weight: bold;
                color: #555;
            }

            .size-selector select {
                padding: 8px 12px;
                border: 2px solid #ddd;
                border-radius: 5px;
                font-size: 16px;
                background: white;
                cursor: pointer;
            }

            .new-game-btn {
                background: #4caf50;
                color: white;
                border: none;
                padding: 10px 20px;
                border-radius: 5px;
                font-size: 16px;
                cursor: pointer;
                font-weight: bold;
                transition: background 0.3s;
            }

            .new-game-btn:hover {
                background: #45a049;
            }

            .game-stats {
                display: flex;
                justify-content: space-between;
                margin-bottom: 20px;
                font-weight: bold;
                color: #555;
            }

            .game-board {
                display: grid;
                gap: 10px;
                justify-content: center;
                margin: 20px 0;
            }

            .card {
                aspect-ratio: 1;
                background: #f0f0f0;
                border: 2px solid #ddd;
                border-radius: 8px;
                cursor: pointer;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 2em;
                transition: all 0.3s ease;
                position: relative;
                overflow: hidden;
            }

            .card:hover {
                transform: scale(1.05);
                box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            }

            .card.flipped {
                background: #fff;
                border-color: #4caf50;
            }

            .card.matched {
                background: #e8f5e8;
                border-color: #4caf50;
                cursor: default;
            }

            .card.matched:hover {
                transform: none;
            }

            .card-back {
                background: linear-gradient(45deg, #667eea, #764ba2);
                color: white;
                font-weight: bold;
                width: 100%;
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
                border-radius: 6px;
            }

            .card-front {
                display: none;
                font-size: 2.5em;
                animation: flipIn 0.3s ease;
            }

            .card.flipped .card-back {
                display: none;
            }

            .card.flipped .card-front {
                display: flex;
                align-items: center;
                justify-content: center;
                width: 100%;
                height: 100%;
            }

            @keyframes flipIn {
                from {
                    transform: rotateY(-90deg);
                }
                to {
                    transform: rotateY(0deg);
                }
            }

            .win-message {
                text-align: center;
                margin-top: 20px;
                padding: 20px;
                background: #4caf50;
                color: white;
                border-radius: 10px;
                font-size: 1.5em;
                font-weight: bold;
                display: none;
            }

            /* Responsive grid sizes */
            .grid-2x4 {
                grid-template-columns: repeat(4, 70px);
                grid-template-rows: repeat(2, 70px);
            }

            .grid-3x3 {
                grid-template-columns: repeat(3, 80px);
                grid-template-rows: repeat(3, 80px);
            }

            .grid-4x4 {
                grid-template-columns: repeat(4, 70px);
                grid-template-rows: repeat(4, 70px);
            }

            .grid-5x5 {
                grid-template-columns: repeat(5, 60px);
                grid-template-rows: repeat(5, 60px);
            }

            .grid-6x6 {
                grid-template-columns: repeat(6, 50px);
                grid-template-rows: repeat(6, 50px);
            }

            @media (max-width: 600px) {
                .grid-2x4 {
                    grid-template-columns: repeat(4, 60px);
                    grid-template-rows: repeat(2, 60px);
                }

                .grid-3x3 {
                    grid-template-columns: repeat(3, 70px);
                    grid-template-rows: repeat(3, 70px);
                }

                .grid-4x4 {
                    grid-template-columns: repeat(4, 60px);
                    grid-template-rows: repeat(4, 60px);
                }

                .grid-5x5 {
                    grid-template-columns: repeat(5, 50px);
                    grid-template-rows: repeat(5, 50px);
                }

                .grid-6x6 {
                    grid-template-columns: repeat(6, 40px);
                    grid-template-rows: repeat(6, 40px);
                }

                .card {
                    font-size: 1.5em;
                }
            }
        </style>
    </head>
    <body>
        <div class="game-container">
            <h1>ðŸŽ¯ Matching Pair Game</h1>

            <div class="controls">
                <div class="size-selector">
                    <label for="gridSize">Grid Size:</label>
                    <select id="gridSize">
                        <option value="2">2x4</option>
                        <option value="4" selected>4x4</option>
                        <option value="6">6x6</option>
                    </select>
                </div>
                <button class="new-game-btn" onclick="startNewGame()">
                    New Game
                </button>
            </div>

            <div class="game-stats">
                <div>Moves: <span id="moveCount">0</span></div>
                <div>
                    Pairs Found: <span id="pairCount">0</span> /
                    <span id="totalPairs">8</span>
                </div>
                <div>Time: <span id="timer">00:00</span></div>
            </div>

            <div class="game-board" id="gameBoard"></div>

            <div class="win-message" id="winMessage">
                ðŸŽ‰ Congratulations! You won! ðŸŽ‰
            </div>
        </div>

        <script>
            class MatchingPairGame {
                constructor() {
                    this.gridSize = 4;
                    this.cards = [];
                    this.flippedCards = [];
                    this.matchedPairs = 0;
                    this.moves = 0;
                    this.startTime = null;
                    this.timerInterval = null;
                    this.isProcessing = false;

                    // Emoji symbols for the cards
                    this.symbols = [
                        "ðŸ¶",
                        "ðŸ±",
                        "ðŸ­",
                        "ðŸ¹",
                        "ðŸ°",
                        "ðŸ¦Š",
                        "ðŸ»",
                        "ðŸ¼",
                        "ðŸ¨",
                        "ðŸ¯",
                        "ðŸ¦",
                        "ðŸ®",
                        "ðŸ·",
                        "ðŸ¸",
                        "ðŸµ",
                        "ðŸ”",
                        "ðŸ¦„",
                        "ðŸ",
                        "ðŸž",
                        "ðŸ¦‹",
                        "ðŸ™",
                        "ðŸ ",
                        "ðŸ¡",
                        "ðŸ¢",
                        "ðŸŽ",
                        "ðŸŠ",
                        "ðŸ‹",
                        "ðŸŒ",
                        "ðŸ‡",
                        "ðŸ“",
                        "ðŸ’",
                        "ðŸ‘",
                        "âš½",
                        "ðŸ€",
                        "ðŸˆ",
                        "âš¾",
                        "ðŸŽ¾",
                        "ðŸ",
                        "ðŸ“",
                        "ðŸŽ±",
                    ];

                    this.initializeGame();
                }

                initializeGame() {
                    this.updateGridSize();
                    this.startNewGame();
                }

                updateGridSize() {
                    const select = document.getElementById("gridSize");
                    this.gridSize = parseInt(select.value);

                    // Calculate total cards and pairs based on grid size
                    let totalCards, rows, cols;

                    if (this.gridSize === 2) {
                        // 2x4 grid (8 cards)
                        rows = 2;
                        cols = 4;
                        totalCards = 8;
                    } else {
                        // Square grids (4x4, 6x6)
                        rows = this.gridSize;
                        cols = this.gridSize;
                        totalCards = this.gridSize * this.gridSize;
                    }

                    this.rows = rows;
                    this.cols = cols;
                    this.totalCards = totalCards;

                    document.getElementById("totalPairs").textContent =
                        totalCards / 2;
                }

                startNewGame() {
                    this.updateGridSize();
                    this.resetGameState();
                    this.createCards();
                    this.renderBoard();
                    this.startTimer();
                }

                resetGameState() {
                    this.cards = [];
                    this.flippedCards = [];
                    this.matchedPairs = 0;
                    this.moves = 0;
                    this.isProcessing = false;

                    document.getElementById("moveCount").textContent = "0";
                    document.getElementById("pairCount").textContent = "0";
                    document.getElementById("winMessage").style.display =
                        "none";

                    if (this.timerInterval) {
                        clearInterval(this.timerInterval);
                    }
                }

                createCards() {
                    const pairCount = this.totalCards / 2;

                    // Select random symbols for this game
                    const gameSymbols = this.symbols.slice(0, pairCount);

                    // Create pairs
                    const cardValues = [...gameSymbols, ...gameSymbols];

                    // Shuffle the cards
                    for (let i = cardValues.length - 1; i > 0; i--) {
                        const j = Math.floor(Math.random() * (i + 1));
                        [cardValues[i], cardValues[j]] = [
                            cardValues[j],
                            cardValues[i],
                        ];
                    }

                    // Create card objects
                    this.cards = cardValues.map((symbol, index) => ({
                        id: index,
                        symbol: symbol,
                        isFlipped: false,
                        isMatched: false,
                    }));
                }

                renderBoard() {
                    const board = document.getElementById("gameBoard");
                    board.innerHTML = "";

                    // Set grid class based on grid size
                    if (this.gridSize === 2) {
                        board.className = "game-board grid-2x4";
                    } else {
                        board.className = `game-board grid-${this.gridSize}x${this.gridSize}`;
                    }

                    this.cards.forEach((card) => {
                        const cardElement = document.createElement("div");
                        cardElement.className = "card";
                        cardElement.dataset.cardId = card.id;
                        cardElement.onclick = () => this.flipCard(card.id);

                        cardElement.innerHTML = `
                        <div class="card-back">?</div>
                        <div class="card-front">${card.symbol}</div>
                    `;

                        board.appendChild(cardElement);
                    });
                }

                flipCard(cardId) {
                    if (this.isProcessing) return;

                    const card = this.cards[cardId];
                    const cardElement = document.querySelector(
                        `[data-card-id="${cardId}"]`
                    );

                    if (card.isFlipped || card.isMatched) return;
                    if (this.flippedCards.length >= 2) return;

                    // Flip the card
                    card.isFlipped = true;
                    cardElement.classList.add("flipped");
                    this.flippedCards.push(card);

                    if (this.flippedCards.length === 2) {
                        this.moves++;
                        document.getElementById("moveCount").textContent =
                            this.moves;
                        this.checkForMatch();
                    }
                }

                checkForMatch() {
                    this.isProcessing = true;
                    const [card1, card2] = this.flippedCards;

                    setTimeout(() => {
                        if (card1.symbol === card2.symbol) {
                            // Match found
                            this.handleMatch(card1, card2);
                        } else {
                            // No match
                            this.handleNoMatch(card1, card2);
                        }

                        this.flippedCards = [];
                        this.isProcessing = false;
                    }, 1000);
                }

                handleMatch(card1, card2) {
                    card1.isMatched = true;
                    card2.isMatched = true;

                    const element1 = document.querySelector(
                        `[data-card-id="${card1.id}"]`
                    );
                    const element2 = document.querySelector(
                        `[data-card-id="${card2.id}"]`
                    );

                    element1.classList.add("matched");
                    element2.classList.add("matched");

                    this.matchedPairs++;
                    document.getElementById("pairCount").textContent =
                        this.matchedPairs;

                    if (this.matchedPairs === this.totalCards / 2) {
                        this.gameWon();
                    }
                }

                handleNoMatch(card1, card2) {
                    card1.isFlipped = false;
                    card2.isFlipped = false;

                    const element1 = document.querySelector(
                        `[data-card-id="${card1.id}"]`
                    );
                    const element2 = document.querySelector(
                        `[data-card-id="${card2.id}"]`
                    );

                    element1.classList.remove("flipped");
                    element2.classList.remove("flipped");
                }

                startTimer() {
                    this.startTime = Date.now();
                    this.timerInterval = setInterval(() => {
                        const elapsed = Math.floor(
                            (Date.now() - this.startTime) / 1000
                        );
                        const minutes = Math.floor(elapsed / 60)
                            .toString()
                            .padStart(2, "0");
                        const seconds = (elapsed % 60)
                            .toString()
                            .padStart(2, "0");
                        document.getElementById(
                            "timer"
                        ).textContent = `${minutes}:${seconds}`;
                    }, 1000);
                }

                gameWon() {
                    clearInterval(this.timerInterval);
                    const winMessage = document.getElementById("winMessage");
                    const finalTime =
                        document.getElementById("timer").textContent;
                    winMessage.innerHTML = `ðŸŽ‰ Congratulations! ðŸŽ‰<br>You won in ${this.moves} moves and ${finalTime}!`;
                    winMessage.style.display = "block";
                }
            }

            // Initialize the game
            let game;

            function startNewGame() {
                if (game) {
                    game.startNewGame();
                } else {
                    game = new MatchingPairGame();
                }
            }

            // Initialize when page loads
            window.addEventListener("load", () => {
                game = new MatchingPairGame();

                // Add event listener for grid size changes
                document
                    .getElementById("gridSize")
                    .addEventListener("change", () => {
                        game.startNewGame();
                    });
            });
        </script>
    </body>
</html>
